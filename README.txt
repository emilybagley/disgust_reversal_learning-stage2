Contains all scripts for all analyses detailed in the stage 2 registered report. 
(NB therefore, there is some duplication with the stage 1 report)

Csvs folder:
Contains the csvs created in the data-cleaning scripts 
(e.g., a full blinded dataframe, a demography dataframe, a dataframe with video-ratings, task dataframes, exclusion details)

Data folder:
Contains original data (raw jatos files) and unblinding document
data_to_blinded_csv.ipynb - converts data to blinded csv file 


data_cleaning folder:
00_data_checks.ipynb: was be used to make rolling exclusions. Look at data from one participant and determine if they passed the exclusion criteria.
0_data_clearning.ipynb: Takes blinded csv trials and makes exclusions using pre-registered exclusion criteria
checking_exclusions.ipynb: checks the exclusions did not affect representativeness of the sample (compares actual numbers in each demographic category to target numbers)

power_analysis folder: 
A_power_analysis_script: carries out both liberal and conservative power analyses, saving the outputs into power tables
B_power_analysis_plots: uses the power tables to identify the minimum required sample and plot power curves
C_power_analysis_withinsubjcorr: carries out additional checks for the main power analysis. 
    namely, assessing the effects of a lower within-subject correlation on power.
D_power_analysis_maximalmodels:  carries out additional checks for the main power analysis. 
    namely, assessing the effects of a more maximal model on power.

results folder:
/video_ratings folder
//pvals: contains p-values from key results for plotting
//figures: contains code to create figures and the figure files themselves 
VideoRatings.md: contains all the video-ratings analyses (models A-H specified by the analysis plan)
VideoRatings.qmd: contains quartofile that creates videoratings markdownfile

/model_agnostic folder: all the model_agnostic analyses
//figures: contains codes to create figures and figure files themselves
//pvals: contains p-values from key results for plotting
perseverativeErrors.md: all analyses for perseverative error outcome
perseverativeErrors.qmd: quartofile to create perseverativeErrors.md
perseverativeErrors_files/: figure files for perseverativeErrors.md
regressiveErrors.md: all analyses for regressive error outcome
regressiveErrors.qmd: quartofile to create markdown file
regressiveErrors_files/: figure files for markdown file
winStay.md: all analyses for win-stay outcome
winStay.qmd: quartofile to make markdown file
winStay_files/: figure files for markdown file
loseShift.md: all analyses for lose-shift outcome
loseShift.qmd: quartofile to make markdown file
loseShift_files/: figure files for markdown file


/comp_modeling folder: all the computational modeling analyses
//figures: contains code to create figures and figure files themselves
//pvals: contains p-values from key results for plotting
modelCompAndChecks.md: contains model comparison and checks on the winning model
modelCompAndChecks.qmd: quartofile to create markdown
modelCompAndChecks_files: auto-generated figure files for modelCompAndChecks markdown
inverseTemp.md: contains analyses on inverse temperature parameter
inverseTemp.qmd: quartofile to create markdown
inverseTemp_files/ autogenerated figure files for markdown
learningRate.md: contains analyses on learning rate parameter
learningRate.qmd: quartofile to create markdown
learningRate_files/ autogenerated figure files for markdown
stickiness.md: contains analyses on stickiness parameter
stickiness.qmd:quartofile to create markdown
stickiness_files/ autogenerated figure files for markdown

//csvs: contains csvs (and one rds file) for computational modeling analyses
complete_task_excluded.csv: raw task data (same as used in task agnostic analysis)
winningModelOutput.csv: parameters from the winning model (1lr_stick1_allparamsep)
sensitivity_winningModelOutput.csv: parameters from the winning model once outliers have been excluded

//modelFitting: contains all files necessary to fit data to all models in the model space 
makeStanData.R: converts task-data to the structure necessary to fit to the stan model
submitcluster.sh: submits all models to the cluster (specifying number of iterations etc.). Calls runModel.sh/.r, runRandomModel.sh/.r, and checkModel_extractParams files
runModel.sh/.r: runs model and saves csv files (not included in this repository due to size)
runRandomModel.sh/.r: same as above but for random model (also extracts log-likelihood)
///stanFiles: contains the stanfile for each model in the model space (all model are adapted from hBayesDM model - prl_rp (Ouden et al. ,2013 ;https://github.com/CCS-Lab/hBayesDM)
///modelOutputs: would contain outputs for each model (not included here due to memory constraints)
///checkModel_extractParams: contains a file for each model to extract everything needed from the model (parameters, draws matrix, effective sample size, r-hat, y-pred, log likelihood) 

///modelDiagnostics: contains code for parameter recovery, posterior predictive checks, r-hat checks and effective sample size checks (all run on winning model)
testingrhatneff.ipynb: checks that effective sample size and rhat for each model are good
rhat_neff_df.csv: a table which each model and its minimal effective sample size ratio and maximum r-hat value. 

////ParamRecov: contains code for parameter recovery in 1lr_stick1_allparamsep model
simData.sh/.r: simulates datapoints for 100 participants using the 1lr_stick1_allparamsep model equations (saves out simData.rds, simParams.rds and stan_data.rds)
runModel.sh/.r: runs model (as before) but using simulated data
/////modelOutputs: would contain output for this model (almost empty due to memory constraints)
modelPars_1lr_stick1_blk3_allparamsep.rds: contains recovered parameters from parameter recovery

////PPCs: contains code for posterior predictive checks
PPC.sh/.r: extracts y-pred matrix and combines with actual data
postpred_alltrials_1lr_stick1_blk3_allparamsep.rds: a combination of y-pred medians and IQR, and actual data
y_pred_1lr_stick1_blk3_allparamsep.rds: the y-pred matrix extracted from the winning model



